<div ng-controller="CarCtrl">
<h1>
    {{ car.name }}
    <small id="address_car" address="{{ car.address }}">{{ car.address }}</small>
</h1>

    <div style="position: fixed; left:30%">
        <canvas id="videoCanvas" style=" position: absolute; z-index: 0;" width="640" height="480"> </canvas>
        <canvas id="spriteCanvas" style="position: absolute; z-index: 1;" width="640" height="480"> </canvas>
    </div>


    <script src="/static/core/sprites/jsmpg.js"></script>
    <script src="/static/core/sprites/sprite2.js"></script>
    <script src="/static/core/sprites/shot_sprite.js"></script>
    <script src="/static/core/sprites/video_and_sprites.js"></script>

    <button class="btn-default btn-lg" id="FireButton" >Огонь</button>

    <script>
        alert(123123);
        console.log(12323);
        // TODO добавить val на small для получения id car
       // var images_src = {
       //     'balls': '/static/core/sprites/balls.png',
       //     'sprite_bullet_and_fire': '/static/core/sprites/sprite_bullet_and_fire.png'
        //};

//       var dom_el = document.querySelector('[ng-controller="CarCtrl"]');
//        var ng_el = angular.element(dom_el);
//        var ng_el_scope = ng_el.scope();
//        (ng_el_scope.car);

        //var promise = new Promise(function(resolve, reject) {
        //    var addr_car = undefined;
         //   setTimeout(
          //      function () {
           //         for (var i=0; i<=10; i++)
            //        {
              //          console.log(123)
               //     }
                //}, 1
            //);
        //});
       // v = function () {
        //    var addr_car = document.getElementById('address_car').getAttribute('address');
         //   console.log(addr_car);
          //  get_sprites_and_video(images_src, addr_car);
           // console.log(addr_car);
            //var fire_button = document.getElementById('FireButton');
            //fire_button.onclick = function(event) {
             //   if (event)
              //      add_sprites();
            //};

        //};


      //  document.getElementById('address_car').getAttribute('address');

        //while (!addr_car) {
        //    if (document.getElementById('address_car').getAttribute('address').indexOf('car')==-1){
        //        addr_car = document.getElementById('address_car').getAttribute('address');
         //   }
        //}
        //if (addr_car) {
        //    get_sprites_and_video(images_src, addr_car);
        //    console.log(addr_car);

         //   var fire_button = document.getElementById('FireButton');
         //   fire_button.onclick = function(e) {
         //       if (e)
         //           add_sprites();
         //   };
        //}

    </script>

<div style="top:2000px">
    <div ng-keydown="keyDownHandler($event)" ng-keyup="keyUpHandler($event)">

        <div class="row">
            <div class="col-md-offset-2 col-md-8">
                <button id="forwardBtn" type="button" class="btn btn-lg btn-default btn-block" autofocus
                        ng-class="{'btn-primary': moveStatus.forward}"
                        ng-mousedown="move('forward', true)"
                        ng-mouseup="move('forward', false)"
                    >Forward
                </button>
            </div>
        </div>


        <br>
        <div class="row">
            <div class="col-md-4">
                <button id="leftBtn" type="button" class="btn btn-lg btn-default btn-block"
                        ng-class="{'btn-primary': moveStatus.left}"
                        ng-mousedown="move('left', true)"
                        ng-mouseup="move('left', false)"
                    >Left
                </button>
            </div>

            <div class="col-md-offset-4 col-md-4">
                <button id="rightBtn" type="button" class="btn btn-lg btn-default btn-block"
                        ng-class="{'btn-primary': moveStatus.right}"
                        ng-mousedown="move('right', true)"
                        ng-mouseup="move('right', false)"
                    >Right
                </button>
            </div>
        </div>


        <br>
        <div class="row">
            <div class="col-md-offset-2 col-md-8">
                <button id="backwardBtn" type="button" class="btn btn-lg btn-default btn-block"
                        ng-class="{'btn-primary': moveStatus.backward}"
                        ng-mousedown="move('backward', true)"
                        ng-mouseup="move('backward', false)"
                    >Backward
                </button>
            </div>
        </div>
    </div>


    <br>
    <ul class="list-group">
        <li class="list-group-item" ng-repeat="item in commandLog">
            <span class="badge">{{ item.dt }}</span>
            {{ item.response }}
        </li>
    </ul>
</div>
</div>